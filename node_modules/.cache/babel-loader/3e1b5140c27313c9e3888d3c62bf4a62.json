{"ast":null,"code":"import http from \"../http-spotify\";\n\nclass SpotifyService {\n  getAuth() {\n    return http.get(\"/songdatas\");\n  }\n\n  getTopData(id) {\n    return http.get(`/songdatas/${id}`);\n  }\n\n  create(data) {\n    return http.post(\"/songdatas\", data);\n  }\n\n  updateToken() {\n    //app.get('/refresh_token', function (req, res) {\n    // requesting access token from refresh token \n    var refresh_token = req.query.refresh_token;\n    var authOptions = {\n      url: 'https://accounts.spotify.com/api/token',\n      headers: {\n        'Authorization': 'Basic ' + Buffer.from(process.env.CLIENT_ID + ':' + process.env.CLIENT_SECRET).toString('base64')\n      },\n      form: {\n        grant_type: 'refresh_token',\n        refresh_token: refresh_token\n      },\n      json: true\n    };\n    /*http.post(authOptions, function (error, response, body) {\r\n        if (!error && response.statusCode === 200) {\r\n            var access_token = body.access_token;\r\n            res.send({\r\n                'access_token': access_token\r\n            });\r\n        }\r\n    });*/\n\n    http.post('/token', {\n      form: {\n        grant_type: 'refresh_token',\n        refresh_token: refresh_token\n      },\n      data\n    }).then(response => {\n      console.log(response); //dispatch({ type: FOUND_USER, data: response.data[0] })\n    }).catch(error => {\n      console.log(error); //dispatch({ type: ERROR_FINDING_USER })\n    });\n    return response.access_token; //http.put(`/songdatas/${id}`, data);\n  }\n\n}\n\nexport default new SpotifyService();","map":{"version":3,"names":["http","SpotifyService","getAuth","get","getTopData","id","create","data","post","updateToken","refresh_token","req","query","authOptions","url","headers","Buffer","from","process","env","CLIENT_ID","CLIENT_SECRET","toString","form","grant_type","json","then","response","console","log","catch","error","access_token"],"sources":["B:/Otavio/Documents/IOT/FrontMaisTocadasUFMG/src/services/spotify.service.js"],"sourcesContent":["import http from \"../http-spotify\";\r\n\r\nclass SpotifyService {\r\n    getAuth() {\r\n        return http.get(\"/songdatas\");\r\n    }\r\n    getTopData(id) {\r\n        return http.get(`/songdatas/${id}`);\r\n    }\r\n    create(data) {\r\n        return http.post(\"/songdatas\", data);\r\n    }\r\n    updateToken() { //app.get('/refresh_token', function (req, res) {\r\n        // requesting access token from refresh token \r\n        var refresh_token = req.query.refresh_token;\r\n        var authOptions = {\r\n            url: 'https://accounts.spotify.com/api/token',\r\n            headers: { 'Authorization': 'Basic ' + (Buffer.from(process.env.CLIENT_ID + ':' + process.env.CLIENT_SECRET).toString('base64')) },\r\n            form: {\r\n                grant_type: 'refresh_token',\r\n                refresh_token: refresh_token\r\n            },\r\n            json: true\r\n        };\r\n\r\n        /*http.post(authOptions, function (error, response, body) {\r\n            if (!error && response.statusCode === 200) {\r\n                var access_token = body.access_token;\r\n                res.send({\r\n                    'access_token': access_token\r\n                });\r\n            }\r\n        });*/\r\n\r\n        http.post('/token', {\r\n            form: {\r\n                grant_type: 'refresh_token',\r\n                refresh_token: refresh_token\r\n            },\r\n            data\r\n        })\r\n            .then((response) => {\r\n                console.log(response) //dispatch({ type: FOUND_USER, data: response.data[0] })\r\n            })\r\n            .catch((error) => {\r\n                console.log(error)//dispatch({ type: ERROR_FINDING_USER })\r\n            })\r\n\r\n        return response.access_token//http.put(`/songdatas/${id}`, data);\r\n    }\r\n}\r\nexport default new SpotifyService();"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,iBAAjB;;AAEA,MAAMC,cAAN,CAAqB;EACjBC,OAAO,GAAG;IACN,OAAOF,IAAI,CAACG,GAAL,CAAS,YAAT,CAAP;EACH;;EACDC,UAAU,CAACC,EAAD,EAAK;IACX,OAAOL,IAAI,CAACG,GAAL,CAAU,cAAaE,EAAG,EAA1B,CAAP;EACH;;EACDC,MAAM,CAACC,IAAD,EAAO;IACT,OAAOP,IAAI,CAACQ,IAAL,CAAU,YAAV,EAAwBD,IAAxB,CAAP;EACH;;EACDE,WAAW,GAAG;IAAE;IACZ;IACA,IAAIC,aAAa,GAAGC,GAAG,CAACC,KAAJ,CAAUF,aAA9B;IACA,IAAIG,WAAW,GAAG;MACdC,GAAG,EAAE,wCADS;MAEdC,OAAO,EAAE;QAAE,iBAAiB,WAAYC,MAAM,CAACC,IAAP,CAAYC,OAAO,CAACC,GAAR,CAAYC,SAAZ,GAAwB,GAAxB,GAA8BF,OAAO,CAACC,GAAR,CAAYE,aAAtD,EAAqEC,QAArE,CAA8E,QAA9E;MAA/B,CAFK;MAGdC,IAAI,EAAE;QACFC,UAAU,EAAE,eADV;QAEFd,aAAa,EAAEA;MAFb,CAHQ;MAOde,IAAI,EAAE;IAPQ,CAAlB;IAUA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;IAEQzB,IAAI,CAACQ,IAAL,CAAU,QAAV,EAAoB;MAChBe,IAAI,EAAE;QACFC,UAAU,EAAE,eADV;QAEFd,aAAa,EAAEA;MAFb,CADU;MAKhBH;IALgB,CAApB,EAOKmB,IAPL,CAOWC,QAAD,IAAc;MAChBC,OAAO,CAACC,GAAR,CAAYF,QAAZ,EADgB,CACM;IACzB,CATL,EAUKG,KAVL,CAUYC,KAAD,IAAW;MACdH,OAAO,CAACC,GAAR,CAAYE,KAAZ,EADc,CACI;IACrB,CAZL;IAcA,OAAOJ,QAAQ,CAACK,YAAhB,CApCU,CAoCkB;EAC/B;;AA/CgB;;AAiDrB,eAAe,IAAI/B,cAAJ,EAAf"},"metadata":{},"sourceType":"module"}